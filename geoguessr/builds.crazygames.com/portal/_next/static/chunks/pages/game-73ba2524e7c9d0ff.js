(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79203],{10134:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game",function(){return a(77447)}])},50108:function(e,t,a){"use strict";var n,r;a.d(t,{R:function(){return n}}),(r=n||(n={})).UNITY="unity",r.IFRAME="iframe",r.LINK="link",r.MINICLIP="miniclip",r.SWFVIEWER="swfviewer",r.RUFFLE="ruffle"},90611:function(e,t,a){"use strict";a.d(t,{J:function(){return i}});var n=a(67294),r=a(380);let i=e=>{let{game:t}=e,{setPlayingGame:a,resetGameInvites:i,setGameInviteLink:s}=n.useContext(r.DN);return n.useEffect(()=>{if(t)return a(t),()=>{a(null),s(null),i()}},[t,i,s,a]),null}},3242:function(e,t,a){"use strict";a.d(t,{Ue:function(){return o},cn:function(){return i},iA:function(){return s}});let n=!1,r=[];function i(){n=!0,r.forEach(e=>e()),r=[]}function s(){n=!1,r=[]}function o(e){if(n){e();return}r.push(e)}},84290:function(e,t,a){"use strict";a.d(t,{Z:function(){return v}});var n=a(85893),r=a(67294),i=a(89950),s=a(84973),o=a(37899),l=a(17784),u=a(74040),c=a(13422);let d=e=>{let{gameId:t}=e,{services:a}=r.useContext(o.Z),{user:n}=r.useContext(u.S),{syncPlayedTime:i}=r.useContext(c.rh),s=r.useRef(Date.now()),d={};l.aQ.forEach(e=>{d[e]=!1});let m=r.useRef(d),{gamesPlayedService:g,analyticsService:f}=a;r.useEffect(()=>()=>{i()},[i,t]);let p=(0,r.useCallback)(()=>{let e=Math.round((Date.now()-s.current)/1e3);g.handlePlayedTimeForSession(t,e),l.aQ.forEach(a=>{e>=60*a&&!m.current[a]&&(f.trackSessionPlaytimeRanges(t,a),m.current[a]=!0)})},[t,g,f]),h=(0,r.useCallback)(()=>{if(!n)return;let e=Math.round((Date.now()-s.current)/1e3);g.handlePlayedTimeForUPSync(t,e)},[n,t,g]);return r.useEffect(()=>{n&&h()},[n,h]),r.useEffect(()=>{let e=null,t=()=>{e=window.setInterval(()=>{h(),p()},l.rP)},a=()=>{e&&(window.clearInterval(e),h(),p(),e=null)},n=()=>{document.hidden?a():t()};return t(),document.addEventListener("visibilitychange",n),function(){document.removeEventListener("visibilitychange",n),e&&window.clearInterval(e)}},[p,h]),null};var m=a(32017),g=a(69395),f=a(3242),p=a(92975),h=a(58752);class y extends r.Component{addToRecentTimeout=null;gameStartTime=0;constructor(e){super(e),this.state={trackTime:!1}}render(){let{game:e}=this.props,{trackTime:t}=this.state;return t&&(0,n.jsx)(d,{gameId:e.id})}componentDidMount(){let{services:e,game:t}=this.props;e.crazyAnalyticsService.gamePageLoaded(t.id),window.addEventListener("message",this.processMessage),window.addEventListener("pagehide",this.pageUnload)}componentWillUnmount(){this.savePlayedGameTime(),this.clearGameTracking(),window.removeEventListener("pagehide",this.pageUnload),window.removeEventListener("message",this.processMessage),this.props.services.crazyAnalyticsService.gamePageExited()}pageUnload=()=>{this.savePlayedGameTime()};processMessage=e=>{if(e.data&&e.data.type===i.V)switch(e.data.event){case"afterPlayNow":(0,m.hO)("afterPlayNow");break;case"gameStartLoad":(0,m.hO)("gameStartLoad");break;case"gameLoaded":let{gfVersion:t}=e.data,a=this.props.experiment?.czyExpIsPrefetchEnabled2==="enabled"&&!this.props.deviceType.isDesktop;if(!a){this.handlePlayerStartedPlaying(t);return}(0,f.Ue)(()=>{this.handlePlayerStartedPlaying(t)})}};handlePlayerStartedPlaying(e){(0,m.hO)("afterGameLoad"),this.setGameTracking(e),this.addToRecent()}addToRecent(){this.addToRecentTimeout=window.setTimeout(this.delayedAddToRecent,45e3)}delayedAddToRecent=()=>{let{game:e,userRecent:t}=this.props;t.addToRecent({id:e.id,slug:e.slug,name:e.name,cover:e.cover,videos:e.videos,status:e.status,iosFriendly:e.iosFriendly,androidFriendly:e.androidFriendly,mobileFriendly:!!(e.iosFriendly||e.androidFriendly),gameThumbLabels:[],playedTime:45})};setGameTracking(e){let{services:t,game:a}=this.props,{gamesPlayedService:n,crazyAnalyticsService:r}=t;n.startedPlayingGame(a),this.gameStartTime=Date.now();let i=h.Do(a.slug)?.numPlays||1;r.playingStarts({gfVersion:e,gameId:a.id,numPlays:i}),(0,h.ug)(a.slug),this.setState({trackTime:!0})}savePlayedGameTime(){let{game:e,services:t}=this.props;if(this.gameStartTime){let a=Math.min(27e5,Date.now()-this.gameStartTime);t.gamesPlayedService.trackPlayedTime(e.slug,a)}}clearGameTracking(){this.addToRecentTimeout&&window.clearTimeout(this.addToRecentTimeout),this.setState({trackTime:!1})}}var v=(0,s.Z)((0,c.VP)((0,p.Z)(function(e){let t=t=>{let a=r.useContext(g.T);return(0,n.jsx)(e,{experiment:a,...t})};return t}(y))))},44898:function(e,t,a){"use strict";var n=a(50319),r=a(73359),i=a(67294),s=a(21046),o=a(89950),l=a(74040),u=a(95129),c=a(42257);async function d(e){let t=await fetch(e,{method:"GET"}),a=await t.text();return a}let m=e=>{let{gameId:t,gameTechnology:a}=e,{user:m}=i.useContext(l.S),g=i.useContext(u.Z),f=i.useContext(c.Z),[p]=(0,n.D)(s._l),[h]=(0,n.D)(s.dO),[y,v]=(0,r.t)(s.kJ),w=i.useRef([]);return i.useEffect(()=>{if(!v.called||v.loading)return;let e=v.data?.gameData;v.error?(w.current.forEach(e=>{e({type:"requestGameDataNone"})}),w.current=[]):e&&e.dataUrl?d(e.dataUrl).then(t=>{let a={...e,data:t};w.current.forEach(e=>{e({type:"requestGameDataResponse",data:{store:a,error:v.error}})}),w.current=[]}):(w.current.forEach(e=>{e({type:"requestGameDataResponse",data:{store:void 0,error:v.error}})}),w.current=[])},[v]),i.useEffect(()=>{let e=e=>{let n=t=>{let a=e.source;a&&a.postMessage(t,"*")};m?(w.current=[n,...w.current],y({variables:{id:t,technology:a},fetchPolicy:"network-only"})):w.current.forEach(e=>{e({type:"requestGameDataResponse",data:{store:void 0,error:null}})})},n=e=>{let{store:n,version:r,updatedAtTz:i,playedTime:s}=e.data,o=JSON.stringify(n),l=g.browser?.name||"",u=(0,c.c)(f);p({variables:{input:{data:o,id:t,technology:a,version:r,browser:l,playedTime:s,deviceType:u,updatedAtTz:i}}})},r=e=>{let{version:n}=e.data,r=g.browser?.name||"",i=(0,c.c)(f);h({variables:{input:{id:t,technology:a,version:n,browser:r,deviceType:i}}})},i=t=>{if(t.data&&t.data.type===o.V)switch(t.data.event){case"requestGameData":e(t);break;case"updateGameData":case"replaceGameData":m&&n(t);break;case"clearGameData":m&&r(t);break;default:return}};return window.addEventListener("message",i),function(){window.removeEventListener("message",i)}},[p,y,h,t,a,m,g.browser,f]),null};t.Z=m},21046:function(e,t,a){"use strict";a.d(t,{_l:function(){return s},dO:function(){return o},kJ:function(){return i}});var n=a(14646),r=a(12774);let i=r.qR,s=n.OX,o=n.Le},26830:function(e,t,a){"use strict";a.d(t,{$W:function(){return p},LG:function(){return T},Q6:function(){return y},Qq:function(){return g},U9:function(){return f},_:function(){return w},_Y:function(){return c},_f:function(){return G},ak:function(){return h},bM:function(){return d},et:function(){return P},h7:function(){return v},tO:function(){return m}});var n=a(45703),r=a(75538),i=a(29338),s=a(46313),o=a(33209),l=a(88642);function u(e){let t=s.Z.Instance.data.domains,a=t.map(t=>{let a={...r.t},s=new n.Z(a),o=s.generateHome({page:e});if(!o)return null;let l=(0,i.Z)(t.host,o.as,{}).toString();return{locale:t.locale,href:l.toString(),host:t.host}});return a.filter(e=>!!e)}function c(e){return b(e=>e.generateCompetitions(),{},e,"competitions")}function d(e){return b(e=>e.generateScholarship(),{},e,"scholarship")}function m(e){return b(e=>e.generateRecent(),{},e,"recent")}function g(e){return b(e=>e.generateOriginals(),{},e,"originals")}function f(e){return b(e=>e.generateTags(),{},e,"tags")}function p(e,t){return b((e,t)=>e.generateGame(t),{slug:e},t,"game")}function h(e){return b(e=>e.generateGameChallenge(),{},e,"game-challenge")}function y(e){return b(e=>e.generatePrivacyPolicy(),{},e,"privacyPolicy")}function v(e){return b(e=>e.generateTermsAndConditions(),{},e,"termsAndConditions")}function w(e){return b(e=>e.generateSearch(),{},e,"search")}async function P(e,t,a,n,r){if(r)return u(n);if(t&&"hot"===t)return b(e=>e.generatePaginatedHotGames({page:n}),{},await a.getRouteProviderData("hotGames"),"hotGames");switch(e){case l.Fi:let i=await a.getRouteProviderData("newGames");return b(e=>e.generatePaginatedNewGames({page:n}),{},i,"newGames");case l.sc:case l.K6:return b(e=>e.generatePaginatedUpdatedGames({page:n}),{},await a.getRouteProviderData("updatedGames"),"updatedGames");default:return console.warn(`unexpected sorting in games ${e}`),u(n)}}async function T(e,t,a){if(e.isCategory){let n=await t.getRouteProviderData("category");return b((e,t)=>e.generateCategory(t),{slugTrl:e.slug,page:a},n,"category")}{let n=await t.getRouteProviderData("tag");return b((e,t)=>e.generateTag(t),{slugTrl:e.slug,page:a},n,"tag")}}function G(e,t){return b(t=>t.generateAllGames(e),{},t,"allGames")}function b(e,t,a,l){let u=function(e){let t=s.Z.Instance.data.domains,a=e.map(e=>{let a=t.find(t=>{let a=(0,o.Ld)(t.locale);return a===e.locale});return{domain:a,routeData:e}});return a}(a),c=u.map(a=>{let s={...r.t,[l]:a.routeData.route,locale:a.routeData.locale},o=new n.Z(s),u=e(o,t);if(!u||!a.domain)return null;let c=(0,i.Z)(a.domain.host,u.as,{}).toString();return{locale:a.domain.locale,href:c.toString(),host:a.domain.host}});return c.filter(e=>!!e)}},77447:function(e,t,a){"use strict";a.r(t);var n=a(85893),r=a(67294),i=a(50108),s=a(46313),o=a(26830),l=a(13301),u=a(4498),c=a(33209),d=a(44715),m=a(96851),g=a(88642),f=a(25199),p=a(67749),h=a(11163),y=a.n(h),v=a(94745),w=a(49735),P=a(90611),T=a(18288),G=a(84290),b=a(60081),E=a(44898),x=a(89041),S=a(81792),D=a(98718),R=a(63306),k=a(68771),I=a(5152),C=a.n(I),L=a(42257),Z=a(69395),F=a(17134);let _=C()(()=>Promise.all([a.e(84275),a.e(76532),a.e(21278),a.e(63317)]).then(a.bind(a,89149)),{loadableGenerated:{webpack:()=>[89149]},loading:()=>null,ssr:!0}),j=C()(()=>Promise.all([a.e(84275),a.e(76532),a.e(21278),a.e(43382),a.e(41082)]).then(a.bind(a,43382)),{loadableGenerated:{webpack:()=>[43382]},loading:()=>null,ssr:!0}),M=C()(()=>Promise.all([a.e(84275),a.e(76532),a.e(21278),a.e(9587)]).then(a.bind(a,5054)),{loadableGenerated:{webpack:()=>[5054]},loading:()=>null,ssr:!0}),A=e=>{let{game:t,instant:a,related:o,alternatives:l,hotGames:u,newGames:c}=e,{routeHelper:d}=r.useContext(R.Z),{isDesktop:m}=r.useContext(L.Z),g=(0,v.mV)(),{czyExpNewGamePageDesktop3_v2:f}=r.useContext(Z.T);r.useEffect(()=>((0,F.a)({gameId:t.id}),()=>(0,F.a)({gameId:null})),[t.id]);let p={name:t.name,category:t.category?.name||""},h=t.pageTitle?t.pageTitle:g._("game.head.title",{name:t.name}),y=t.metaDescription||g._("game.head.metaDescriptionFallback",p),I=d.gameCanonical(t.slug),C=s.Z.Instance.data.advertizing.domain,A=!m&&!t.iosFriendly&&!t.androidFriendly,N=!!t.disableAds||"UNAVAILABLE"===t.status||A||(0,k.j)(),U=t.tags.map(e=>e.enSlug||e.slug),O=["23325","23131","22816","22743","22426"];return r.useEffect(()=>{let e;if(t.technology!==i.R.IFRAME||!O.includes(t.id)||!t.loaderConfig?.url||!HTMLScriptElement.supports("speculationrules"))return;(e=document.createElement("script")).id="currentSpecRules",e.type="speculationrules";let a={prerender:[{urls:[t.loaderConfig?.url]}]};return e.textContent=JSON.stringify(a),document.body.append(e),()=>{e&&e.remove()}},[t]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(w.Z,{advertisingGame:{gameName:t.name,gameSlug:t.slug,categoryEnSlug:t.category?.enSlug,tagsSlug:U,numLikes:t.upvotes},disabled:N,smartRefresh:{enabled:!!t.smartRefresh,minWaitInMs:t.minWaitForSmartRefreshInMs,maxWaitInMs:t.maxWaitForSmartRefreshInMs},gamepage_exp_24:void 0!==f?"enabled"===f:void 0,children:[(0,n.jsxs)(T.Z,{title:h,metaDescription:y,canonical:I,alternatives:l,children:[(0,n.jsx)("meta",{name:"apple-mobile-web-app-title",content:t.name}),(0,n.jsx)("link",{rel:"preconnect",href:C}),(()=>{if(t.customStructuredData)return(0,n.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:t.customStructuredData}})})()]}),(0,n.jsx)(b.Z,{canonical:I,title:h,description:y,imageUrl:t.cover,type:"game"}),(0,n.jsx)(S.Z,{children:"enabled"===f?(0,n.jsx)(_,{game:t,related:o,hotGames:u,newGames:c}):(0,n.jsx)(j,{game:t,related:o})}),(0,n.jsx)(D.Z,{children:(0,n.jsx)(M,{game:t,instant:a,related:o})})]},t.slug),(0,n.jsx)(G.Z,{game:t},`gametracking-${t.slug}`),(0,n.jsx)(P.J,{game:t}),(0,n.jsx)(E.Z,{gameId:t.id,gameTechnology:t.technology}),(0,n.jsx)(x.Z,{gameId:t.id})]})};A.getInitialProps=async e=>{let t=(e,t,a)=>{if(e.collection){let n=t.tagPageDirectLink(e.collection,{returnRelative:a});return n}if(e.category){let n=t.categoryPageDirectLink(e.category.slug,{returnRelative:a});return n}return t.homePageLink()},{pageService:a,routeDataService:n}=(0,p.b)(e),r=e.query&&e.query[g.l1],i=(e.query&&e.query.buildId)??null,{deviceType:d}=(0,l.mO)(e),f=(0,l.yz)(d),h=!d.isDesktop,v=h?u.gM:u.$d,[{game:w,related:P,hotGames:T,newGames:G,instant:b},E]=await Promise.all([a.gamePage(r,v,f,i),n.getRouteProviderData("game")]),{res:x}=e,S=(0,c.Kd)(e);if("ARCHIVED"===w.status){let a=await n.getLocaleRouteProviderData(S),r=m.Z.createFromContext(e,a);if(x){let e=t(w,r,!1);x.writeHead(302,{Location:e.as}),x.end()}else{let e=t(w,r,!0);y().push(e.href,e.as)}}x&&w.isKids&&(x.writeHead(302,{Location:`${s.Z.Instance.data.kids}/game/${w.slug}`}),x.end());let D=(0,o.$W)(w.slug,E);return{game:w,related:P,hotGames:T,newGames:G,instant:b,alternatives:D}},t.default=(0,d.Z)("game")((0,f.Z)(A))},75538:function(e,t,a){"use strict";a.d(t,{P:function(){return n},t:function(){return r}});let n=["newGames","updatedGames","hotGames","tags","category","tag","game","preview","termsAndConditions","informationForParents","privacyPolicy","10-anniversary","game-challenge","recent","originals","search","scholarship","competitions","pwa","pwaInstall","allGames"],r={newGames:"",updatedGames:"",hotGames:"",tags:"",category:"",tag:"",game:"",preview:"",termsAndConditions:"",privacyPolicy:"","10-anniversary":"","game-challenge":"",recent:"",originals:"",search:"",pwa:"",pwaInstall:"",allGames:"",locale:""}}},function(e){e.O(0,[76287,25199,79847,94993,49774,92888,40179],function(){return e(e.s=10134)}),_N_E=e.O()}]);